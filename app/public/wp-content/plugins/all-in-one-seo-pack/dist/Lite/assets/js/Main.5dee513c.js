import{c as A,i as x,g as U,a as O,l as J}from"./index.e0fdfdc6.js";import{l as D}from"./license.09950db1.js";import{D as h}from"./datetime.f197aeae.js";import{u as P}from"./GoogleSearchConsole.8d54d4f5.js";import{C as w}from"./Index.2a391835.js";import"./translations.5e539ab1.js";import{_}from"./_plugin-vue_export-helper.eefbdd86.js";import{_ as i}from"./default-i18n.368c2d5c.js";import{a6 as m,o as a,a1 as c,a2 as p,_ as f,$ as d,a4 as l,c as S,l as v,a7 as C,a5 as y,F}from"./runtime-core.esm-bundler.ce5add0b.js";import{_ as N}from"./Button.277f0e3d.js";import{B as V}from"./DatePicker.14dbede9.js";import{_ as G}from"./ConnectCta.1ea6f4fd.js";import $ from"./ContentRankings.895bfd25.js";import{C as z}from"./Blur.92695742.js";import{C as I}from"./Index.7f8ffa1a.js";import{C as E}from"./Index.98b153be.js";import j from"./Dashboard.42258a5d.js";import q from"./IndexStatus.cdb14937.js";import K from"./KeywordRankTracker.f1ff4830.js";import Y from"./SeoStatistics.81d1e87e.js";import"./helpers.b1696305.js";import"./upperFirst.f1673ffa.js";import"./Close.ccd53ef3.js";import"./Calendar.9a717949.js";import"./Pencil.d82df6a1.js";import"./runtime-dom.esm-bundler.dc49ee3e.js";import"./pick.d8956d6e.js";import"./_getTag.e070317d.js";import"./debounce.e3ec254d.js";import"./toNumber.aa196b9c.js";import"./isEqual.657ec1c5.js";import"./_baseIsEqual.bda31e23.js";import"./Cta.e1578e01.js";import"./Row.bb9acf3f.js";import"./PostsTable.3963dd2a.js";import"./PostTypes.762fce6d.js";import"./Statistic.c96e73b3.js";import"./_baseClone.4457226b.js";import"./_arrayEach.6af5abac.js";import"./vue-router.53cc8f39.js";import"./numbers.5e9084c0.js";import"./Tooltip.23c7170d.js";import"./WpTable.1cd376b8.js";import"./ScrollTo.81bea8a7.js";import"./ScoreButton.a94ce559.js";import"./Table.443aaa06.js";import"./Slide.3003ef51.js";import"./Download.aa34559d.js";import"./vue3-apexcharts.d821ad9d.js";import"./IndexStatus.db5cd060.js";import"./CheckSolid.5be77a11.js";import"./IndexStatus.dc3713e6.js";import"./Exclamation.fc507dc9.js";import"./Input.94feb999.js";import"./Trash.87a7d946.js";import"./Mobile.d702625c.js";import"./Link.e6a11169.js";import"./External.5f8a6285.js";import"./ExclamationSolid.37801e1b.js";import"./RequiredPlans.a441f3ff.js";import"./addons.9f9e1bb8.js";import"./License.1ff5556b.js";/* empty css             */import"./params.af7ed354.js";import"./Tabs.9cad5d60.js";import"./ProBadge.e6ec5f9a.js";import"./Caret.cd869c5d.js";import"./Information.98ebb530.js";import"./Header.7289cdcd.js";import"./ScrollAndHighlight.65c440ec.js";import"./LicenseKeyBar.ef8b714c.js";import"./LogoGear.32164283.js";import"./AnimatedNumber.987856b6.js";import"./Logo.3715aad2.js";import"./Support.1c4a9051.js";import"./date.bb1bcec3.js";import"./constants.cb29e214.js";import"./Url.1c574b17.js";import"./Gear.0f79dbf5.js";import"./Card.a415c187.js";import"./Overview.e59a4280.js";import"./DonutChartWithLegend.1bca9e7f.js";import"./DonutChart.2ca39914.js";import"./Loading.ecf9741f.js";import"./KeywordsGraph.67cf4434.js";import"./Graph.74d3748e.js";import"./SeoStatisticsOverview.c7d4a217.js";import"./List.45ef01c7.js";import"./Statistics.48462985.js";import"./Editor.4dffd9f5.js";import"./Index.2713d4dd.js";import"./SettingsRow.fd3e214f.js";import"./External.641efa63.js";import"./Star.9fb15149.js";const Z="all-in-one-seo-pack",H={setup(){return{optionsStore:A(),searchStatisticsStore:x()}},components:{CoreAlert:w},data(){return{error:i("Your connection with Google Search Console has expired or is invalid. Please check that your site is verified in Google Search Console and try to reconnect. If the problem persists, please contact our support team.",Z)}},computed:{invalidAuthentication(){var t,e;return this.searchStatisticsStore.unverifiedSite||typeof((e=(t=this.optionsStore.internalOptions.internal)==null?void 0:t.searchStatistics)==null?void 0:e.profile)!="object"}}};function Q(t,e,r,o,u,s){const g=m("core-alert");return s.invalidAuthentication?(a(),c(g,{key:0,class:"aioseo-input-error aioseo-search-statistics-authentication-alert",type:"red"},{default:p(()=>[f("strong",null,d(u.error),1)]),_:1})):l("",!0)}const W=_(H,[["render",Q]]),X={};function tt(t,e){return a(),S("div")}const et=_(X,[["render",tt]]),st={};function at(t,e){return a(),S("div")}const rt=_(st,[["render",at]]),n="all-in-one-seo-pack",ot={emits:["rolling"],setup(){const{connect:t,loading:e}=P();return{connect:t,licenseStore:U(),rootStore:O(),links:J,loading:e,searchStatisticsStore:x()}},components:{AuthenticationAlert:W,BaseButton:N,BaseDatePicker:V,ConnectCta:G,ContentRankings:$,CoreAlert:w,CoreBlur:z,CoreMain:I,Cta:E,Dashboard:j,IndexStatus:q,KeywordRankTracker:K,PostDetail:et,SeoStatistics:Y,Settings:rt},data(){return{maxDate:null,minDate:null,strings:{pageName:i("Search Statistics",n),sampleDataAlert:i("Sample data is available for you to explore. Connect your site to Google Search Console to receive insights on how content is being discovered. Identify areas for improvement and drive traffic to your website.",n),ctaButtonText:i("Connect to Google Search Console",n),ctaUnlockButtonText:i("Unlock Search Statistics",n)}}},computed:{defaultRange(){const t=new Date(`${this.searchStatisticsStore.range.start} 00:00:00`),e=new Date(`${this.searchStatisticsStore.range.end} 00:00:00`);return[t,e]},excludeTabs(){const t=["post-detail"];return(this.licenseStore.isUnlicensed||!D.hasCoreFeature("search-statistics"))&&t.push("settings"),t},isSettings(){return this.$route.name==="settings"},showSampleDataUnlockCta(){return D.hasCoreFeature("search-statistics")&&!this.searchStatisticsStore.isConnected||this.searchStatisticsStore.unverifiedSite},showConnectCta(){return(D.hasCoreFeature("search-statistics")&&!this.searchStatisticsStore.isConnected||this.searchStatisticsStore.unverifiedSite)&&!this.isSettings},showDatePicker(){const t=this.searchStatisticsStore.isConnected&&!this.searchStatisticsStore.unverifiedSite,e=this.searchStatisticsStore.range.start&&this.searchStatisticsStore.range.end;return!["settings","content-rankings","index-status"].includes(this.$route.name)&&t&&e},containerClasses(){const t=[];return this.searchStatisticsStore.fetching&&t.push("aioseo-blur"),t},getOriginalMaxDate(){return this.searchStatisticsStore.latestAvailableDate?h.fromFormat(this.searchStatisticsStore.latestAvailableDate,"yyyy-MM-dd").setZone(h.zone)||h.local().plus({days:-2}):h.local().plus({days:-2})},datepickerShortcuts(){return[{text:i("Last 7 Days",n),value:()=>(window.aioseoBus.$emit("rolling","last7Days"),[this.getOriginalMaxDate.plus({days:-6}).toJSDate(),this.getOriginalMaxDate.toJSDate()])},{text:i("Last 28 Days",n),value:()=>(window.aioseoBus.$emit("rolling","last28Days"),[this.getOriginalMaxDate.plus({days:-27}).toJSDate(),this.getOriginalMaxDate.toJSDate()])},{text:i("Last 3 Months",n),value:()=>(window.aioseoBus.$emit("rolling","last3Months"),[this.getOriginalMaxDate.plus({days:-89}).toJSDate(),this.getOriginalMaxDate.toJSDate()])}]}},methods:{isDisabledDate(t){return this.minDate===null?!0:t.getTime()<this.minDate.getTime()||t.getTime()>this.maxDate.getTime()},onDateChange(t,e){this.searchStatisticsStore.setDateRange({dateRange:t,rolling:e})},highlightShortcut(t){if(!t)return;document.querySelectorAll(".el-picker-panel__shortcut").forEach(r=>{switch(r.innerText){case i("Last 7 Days",n):t==="last7Days"?r.classList.add("active"):r.classList.remove("active");break;case i("Last 28 Days",n):t==="last28Days"?r.classList.add("active"):r.classList.remove("active");break;case i("Last 3 Months",n):t==="last3Months"?r.classList.add("active"):r.classList.remove("active");break;case i("Last 6 Months",n):t==="last6Months"?r.classList.add("active"):r.classList.remove("active");break;default:r.classList.remove("active")}})}},mounted(){this.minDate=h.now().plus({months:-16}).toJSDate(),this.maxDate=this.getOriginalMaxDate.toJSDate()}},it=f("br",null,null,-1),nt=f("br",null,null,-1),ct={key:1,class:"connect-cta"};function lt(t,e,r,o,u,s){const g=m("base-date-picker"),b=m("authentication-alert"),k=m("base-button"),L=m("core-alert"),B=m("core-blur"),M=m("connect-cta"),T=m("core-main");return a(),c(T,{"page-name":u.strings.pageName,"exclude-tabs":s.excludeTabs,showTabs:!s.excludeTabs.includes(t.$route.name),containerClasses:s.containerClasses},{extra:p(()=>[s.showDatePicker?(a(),c(g,{key:0,onChange:s.onDateChange,onUpdated:e[0]||(e[0]=R=>s.highlightShortcut(R)),clearable:!1,defaultValue:s.defaultRange,defaultRolling:o.searchStatisticsStore.rolling,isDisabledDate:s.isDisabledDate,shortcuts:s.datepickerShortcuts,size:"small"},null,8,["onChange","defaultValue","defaultRolling","isDisabledDate","shortcuts"])):l("",!0)]),default:p(()=>[f("div",null,[v(b),o.searchStatisticsStore.shouldShowSampleReports?(a(),S(F,{key:0},[v(L,{class:"description sample-data-alert",type:"yellow",onCloseAlert:()=>{}},{default:p(()=>[C(d(u.strings.sampleDataAlert)+" ",1),it,nt,s.showSampleDataUnlockCta?(a(),c(k,{key:0,type:"green",size:"small",onClick:o.connect,loading:o.loading},{default:p(()=>[C(d(u.strings.ctaButtonText),1)]),_:1},8,["onClick","loading"])):l("",!0),s.showSampleDataUnlockCta?l("",!0):(a(),c(k,{key:1,tag:"a",href:o.links.getPricingUrl("search-statistics","search-statistics-demo-upsell",t.$route.name,o.rootStore.isPro?"pricing":"liteUpgrade"),target:"_blank",type:"green",size:"small",onClick:o.searchStatisticsStore.showSampleReports,loading:o.loading},{default:p(()=>[C(d(u.strings.ctaUnlockButtonText),1)]),_:1},8,["href","onClick","loading"]))]),_:1}),(a(),c(y(t.$route.name)))],64)):l("",!0),s.showConnectCta?(a(),S("div",ct,[o.searchStatisticsStore.shouldShowSampleReports?l("",!0):(a(),c(B,{key:0},{default:p(()=>[(a(),c(y(t.$route.name)))]),_:1})),o.searchStatisticsStore.shouldShowSampleReports?l("",!0):(a(),c(M,{key:1}))])):l("",!0),!s.showConnectCta&&!o.searchStatisticsStore.shouldShowSampleReports?(a(),c(y(t.$route.name),{key:2})):l("",!0)])]),_:1},8,["page-name","exclude-tabs","showTabs","containerClasses"])}const He=_(ot,[["render",lt]]);export{He as default};
